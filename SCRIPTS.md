# PromptForge Scripts Documentation

## Overview
PromptForge now uses enhanced Python-based setup and verification scripts with comprehensive TruLens integration support.

## Available Scripts

### 1. Primary Scripts (Python-based)

#### `setup_promptforge.py` üöÄ
**Comprehensive setup and installation script**
- Creates virtual environment
- Installs dependencies in staged groups
- Sets up configuration files
- Includes built-in verification
- Generates detailed setup report

```bash
# Run complete setup
python3 setup_promptforge.py

# Features:
# ‚úÖ Virtual environment management
# ‚úÖ Staged dependency installation
# ‚úÖ Configuration file creation
# ‚úÖ Comprehensive verification
# ‚úÖ JSON report generation
```

#### `verify_installation.py` üîç
**Detailed installation verification**
- Tests core imports and functionality
- Verifies TruLens integration
- Checks API endpoints
- Validates configuration
- Generates comprehensive report

```bash
# Run verification
python3 verify_installation.py

# Features:
# ‚úÖ Core component testing
# ‚úÖ Dependency verification
# ‚úÖ TruLens functionality tests
# ‚úÖ API server testing
# ‚úÖ Configuration validation
# ‚úÖ Detailed JSON reporting
```

### 2. Wrapper Scripts (Bash)

#### `setup.sh` üì¶
**Simplified wrapper for Python setup**
```bash
./setup.sh
# Calls: python3 setup_promptforge.py
```

#### `verify.sh` üß™
**Simplified wrapper for Python verification**
```bash
./verify.sh
# Calls: python3 verify_installation.py
```

### 3. Legacy Scripts (Deprecated)

#### `check_installation.py`
- Basic package verification
- Still functional but superseded by `verify_installation.py`

## Script Evolution

### Original Architecture
```
setup.sh (200+ lines of bash)
verify.sh (200+ lines of bash)
check_installation.py (simple package checks)
scripts/setup_promptforge.py (basic setup)
scripts/verify_trulens_setup.py (TruLens specific)
```

### New Consolidated Architecture
```
setup_promptforge.py (comprehensive Python setup)
verify_installation.py (detailed Python verification)
setup.sh (simple Python wrapper)
verify.sh (simple Python wrapper)
```

## Key Improvements

### Enhanced Functionality
- **Staged Installation**: Dependencies installed in logical groups with better error handling
- **TruLens Integration**: Full TruLens v2.2.4 support with feedback functions
- **Comprehensive Testing**: API server, database, configuration, and functionality tests
- **Detailed Reporting**: JSON reports with scores and recommendations

### Better Error Handling
- Individual test isolation
- Timeout management for long-running operations
- Graceful fallbacks for missing components
- Clear error messages with actionable recommendations

### Professional Reporting
```json
{
  "timestamp": "2025-08-27 11:38:53",
  "overall_score": "22/31",
  "percentage": 70.96,
  "results": {
    "core_imports": {"llm_client": true, "trulens_config": true},
    "dependencies": {"openai": true, "fastapi": true},
    "configuration": {"env_file": true, "project_structure": true}
  }
}
```

## Usage Recommendations

### For New Installations
```bash
# Complete setup
python3 setup_promptforge.py

# Or use wrapper
./setup.sh
```

### For Verification
```bash
# Detailed verification
python3 verify_installation.py

# Or use wrapper  
./verify.sh

# Quick package check (legacy)
python3 check_installation.py
```

### For CI/CD Integration
```bash
# Setup in CI
python3 setup_promptforge.py

# Verification with exit codes
python3 verify_installation.py
if [ $? -eq 0 ]; then
    echo "‚úÖ Verification passed"
else
    echo "‚ùå Verification failed"
fi
```

## Report Files

### `setup_report.json`
Generated by `setup_promptforge.py` with:
- Installation timestamps
- Component status
- Dependency success rates
- Next steps and recommendations

### `verification_report.json`
Generated by `verify_installation.py` with:
- Test results by category
- Individual component status
- Overall scores and percentages
- Detailed recommendations

## Troubleshooting

### Common Issues

1. **Virtual Environment**: Scripts handle venv creation/activation automatically
2. **Dependencies**: Staged installation with specific error handling per group
3. **API Keys**: Clear warnings about missing keys with guidance
4. **TruLens**: Mock providers for testing without API keys

### Getting Help

```bash
# Check setup status
python3 verify_installation.py

# Review detailed logs
cat setup_report.json
cat verification_report.json

# Manual verification
source venv/bin/activate
python -c "from evaluation.trulens_config import TruLensConfig; print('‚úÖ TruLens OK')"
```

---

**Migration Note**: The consolidated scripts provide all functionality of the original bash scripts plus enhanced TruLens integration, better error handling, and comprehensive reporting. The bash wrappers ensure backward compatibility while providing access to enhanced Python functionality.